language: go

go: 1.14

env:
  - GO111MODULE=on

cache:
  directories:
    - node_modules

before_install:
  - openssl aes-256-cbc -K $encrypted_ef8c2c06311c_key -iv $encrypted_ef8c2c06311c_iv -in client-secret.json.enc -out client-secret.json -d

install:
  - nvm install 14
  - npm install

before_script:
  - node --version

script:
  - npm run build

deploy:
  provider: gae
  keyfile: client-secret.json
  project: sns-taka3sh-org-157419
  config: app/web/app.yaml
  skip_cleanup: true
